const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/animated-3d-card-BWa6-9Da.js","assets/ui-DBnrXiOs.js","assets/router-us_BkMbn.js","assets/vendor-BYA32aEE.js","assets/utils-f55yTuLs.js","assets/utils-B6yfuscM.js"])))=>i.map(i=>d[i]);
import{j as e,I as je,f as Le,X as Ve,g as Ue,T as Ee,h as ye,D as fe,F as z,i as ce,G as we,k as $,Z as ze,l as Qe,b as le,n as he,o as Pe,p as Ge,q as We,A as Ne,r as Te,s as Ie,t as Re,v as Xe,w as be,x as qe,y as Me,P as Je,z as Ze,E as Fe,H as Ke,C as es,J as ss,K as ts,N as rs,O as as}from"./ui-DBnrXiOs.js";import{r as c,u as Be,c as _e}from"./router-us_BkMbn.js";import{u as W,d as v,_ as ge,g as ke}from"./index-C1saGSt8.js";import{l as Q,m as F,q as G,w as ae,n as Ae,c as R,b as Oe,d as H,s as ls,e as de,p as De,u as O,r as Ce}from"./firebase-CYC7APn9.js";import"./vendor-BYA32aEE.js";function ns({onSuccess:i}){const[l,w]=c.useState({title:"",imageUrl:"",type:"",openingTime:"00:00",closingTime:"23:00",pricePerHour:0,description:"",location:""}),[b,x]=c.useState(!1),[k,g]=c.useState(""),[j,y]=c.useState(""),{user:S,hasRole:N}=W(),p=(()=>{const t=[];for(let d=0;d<24;d++){const f=`${d.toString().padStart(2,"0")}:00`;t.push(f)}return t})(),o=()=>{const t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let d="";for(let f=0;f<30;f++)d+=t.charAt(Math.floor(Math.random()*t.length));return d},T=async t=>{const d=G(F(v,"cards"),ae("Card_ID","==",t));return(await Ae(d)).empty},C=async()=>{let t,d=!1;do t=o(),d=await T(t);while(!d);return t},m=async t=>{if(t.preventDefault(),!S){g("You must be logged in to add a card");return}if(!N("admin")){g("Only admins can create cards");return}if(l.pricePerHour<=0){g("Price per hour must be greater than 0");return}if(!l.title||!l.type||!l.location){g("Title, type, and location are required");return}x(!0),g(""),y("");try{const d=await C();await Q(F(v,"cards"),{...l,Card_ID:d,userId:S.uid,createdAt:new Date,updatedAt:new Date}),w({title:"",imageUrl:"",type:"",openingTime:"00:00",closingTime:"23:00",pricePerHour:0,description:"",location:""}),y("Card created successfully!"),i&&i()}catch{g("Failed to add card. Please try again.")}finally{x(!1)}},u=t=>{const{name:d,value:f,type:P}=t.target;w(q=>({...q,[d]:P==="number"?parseFloat(f)||0:f}))},n=t=>t.charAt(0).toUpperCase()+t.slice(1);return N("admin")?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-6 text-gray-900",children:"Add New Card"}),e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[k&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg",children:k}),j&&e.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg",children:j}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),e.jsx("input",{type:"text",id:"title",name:"title",placeholder:"Enter card title",value:l.title,onChange:t=>{const d=n(t.target.value);w(f=>({...f,title:d}))},required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"imageUrl",className:"block text-sm font-medium text-gray-700 mb-2",children:"Image URL"}),e.jsx("input",{type:"url",id:"imageUrl",name:"imageUrl",placeholder:"https://example.com/image.jpg",value:l.imageUrl,onChange:u,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 mb-2",children:"Type *"}),e.jsx("input",{type:"text",id:"type",name:"type",placeholder:"e.g., Football, Cricket, Tennis",value:l.type,onChange:t=>{const d=n(t.target.value);w(f=>({...f,type:d}))},required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-2",children:"Location *"}),e.jsx("input",{type:"text",id:"location",name:"location",placeholder:"e.g., Banjara Hills, Hyderabad",value:l.location,onChange:t=>{const d=n(t.target.value);w(f=>({...f,location:d}))},required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",placeholder:"Describe the venue, facilities, and amenities...",value:l.description,onChange:t=>{const d=n(t.target.value);w(f=>({...f,description:d}))},rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pricePerHour",className:"block text-sm font-medium text-gray-700 mb-2",children:"Price per Hour (₹) *"}),e.jsx("input",{type:"number",id:"pricePerHour",name:"pricePerHour",placeholder:"Enter price per hour",value:l.pricePerHour||"",onChange:u,min:"1",step:"1",required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"openingTime",className:"block text-sm font-medium text-gray-700 mb-2",children:"Opening Time"}),e.jsx("select",{id:"openingTime",name:"openingTime",value:l.openingTime,onChange:u,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:p.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"closingTime",className:"block text-sm font-medium text-gray-700 mb-2",children:"Closing Time"}),e.jsx("select",{id:"closingTime",name:"closingTime",value:l.closingTime,onChange:u,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:p.map(t=>e.jsx("option",{value:t,children:t},t))})]})]}),e.jsx("button",{type:"submit",disabled:b,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-6 rounded-lg hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium",children:b?"Adding Card...":"Add Card"})]})]}):e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg",children:"Only administrators can create cards."})}const is=_e.lazy(()=>ge(()=>import("./animated-3d-card-BWa6-9Da.js"),__vite__mapDeps([0,1,2,3,4,5])).then(i=>({default:i.Card3D})));function os(){const[i,l]=c.useState([]),[w,b]=c.useState(!0),[x,k]=c.useState(null),[g,j]=c.useState({}),[y,S]=c.useState(!1),[N,A]=c.useState(null),{user:p,hasRole:o}=W(),T=Be(),m=(()=>{const r=[];for(let a=0;a<24;a++){const L=`${a.toString().padStart(2,"0")}:00`;r.push(L)}return r})();c.useEffect(()=>{let r=!1;const a=async()=>{if(!p){l([]),b(!1);return}const M=await ke();if(!M){l([]),b(!1);return}const{collection:J,onSnapshot:te,query:B,where:Z}=await ge(async()=>{const{collection:ne,onSnapshot:ee,query:_,where:se}=await import("./firebase-CYC7APn9.js").then(re=>re.B);return{collection:ne,onSnapshot:ee,query:_,where:se}},[]);let K;return o("admin")?K=B(J(M,"cards")):o("host")?K=B(J(M,"cards"),Z("assignedHost","==",p.uid)):K=B(J(M,"cards"),Z("userId","==",p.uid)),te(K,ne=>{if(r)return;const ee=ne.docs.map(_=>({id:_.id,..._.data()}));ee.sort((_,se)=>{const re=_.createdAt?.toDate?.()||new Date(0);return(se.createdAt?.toDate?.()||new Date(0)).getTime()-re.getTime()}),l(ee),b(!1)},ne=>{r||b(!1)})};let L;return a().then(M=>L=M).catch(M=>{}),()=>{r=!0,L&&L()}},[p,o]),c.useEffect(()=>{i.length!==0&&ge(()=>import("./animated-3d-card-BWa6-9Da.js"),__vite__mapDeps([0,1,2,3,4,5])).then(()=>{}).catch(r=>{})},[i.length]);const u=r=>{k(r.id),j({title:r.title,imageUrl:r.imageUrl,type:r.type,openingTime:r.openingTime,closingTime:r.closingTime,pricePerHour:r.pricePerHour,location:r.location,description:r.description})},n=()=>{k(null),j({})},t=async r=>{if(!g.title||!g.type||!g.pricePerHour){alert("Please fill in all required fields");return}if(g.pricePerHour<=0){alert("Price per hour must be greater than 0");return}S(!0);try{const a=await ke();if(!a)throw new Error("Firestore not available");const{doc:L,updateDoc:M}=await ge(async()=>{const{doc:te,updateDoc:B}=await import("./firebase-CYC7APn9.js").then(Z=>Z.B);return{doc:te,updateDoc:B}},[]),J=L(a,"cards",r);await M(J,{title:g.title,imageUrl:g.imageUrl||"",type:g.type,openingTime:g.openingTime||"00:00",closingTime:g.closingTime||"23:00",pricePerHour:g.pricePerHour,location:g.location||"",description:g.description||"",updatedAt:new Date}),k(null),j({})}catch{alert("Failed to update card. Please try again.")}finally{S(!1)}},d=async(r,a)=>{if(confirm(`Are you sure you want to delete "${a}"? This action cannot be undone.`)){A(r);try{const L=await ke();if(!L)throw new Error("Firestore not available");const{doc:M,deleteDoc:J}=await ge(async()=>{const{doc:te,deleteDoc:B}=await import("./firebase-CYC7APn9.js").then(Z=>Z.B);return{doc:te,deleteDoc:B}},[]);await J(M(L,"cards",r))}catch{alert("Failed to delete card. Please try again.")}finally{A(null)}}},f=(r,a)=>{j(L=>({...L,[r]:a}))},P=r=>{T(`/card/${r}`)},q=r=>r.charAt(0).toUpperCase()+r.slice(1),I=r=>{if(!r)return we;const a=r.toLowerCase();return a.includes("football")||a.includes("soccer")?$:a.includes("cricket")?ze:a.includes("tennis")||a.includes("badminton")?Qe:a.includes("security")||a.includes("safe")?le:a.includes("community")||a.includes("global")?we:we},X=r=>!!(o("admin")||o("host")&&r.assignedHost===p?.uid||o("user")&&r.userId===p?.uid),Y=r=>o("admin");return w?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):p?i.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:o("admin")?"No cards in the system yet.":o("host")?"No cards assigned to you yet.":"No cards yet. Add your first card!"})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(r=>e.jsx("div",{className:"relative overflow-hidden cursor-pointer transition-transform duration-300 hover:scale-1005",children:e.jsxs("div",{onClick:()=>P(r.id),children:[e.jsxs("div",{className:"relative bg-gray-200 dark:bg-gray-700",children:[x===r.id?e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",onClick:a=>a.stopPropagation(),children:e.jsxs("div",{className:"w-full",children:[e.jsxs("label",{className:"block text-white text-sm mb-2 flex items-center",children:[e.jsx(je,{className:"w-4 h-4 mr-1"}),"Image URL"]}),e.jsx("input",{type:"url",value:g.imageUrl||"",onChange:a=>f("imageUrl",a.target.value),onClick:a=>a.stopPropagation(),placeholder:"Image URL",className:"w-full px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded text-sm"})]})}):e.jsx(c.Suspense,{fallback:e.jsx("div",{className:"h-80 bg-gray-200 dark:bg-gray-700 animate-pulse rounded-lg"}),children:e.jsx(is,{title:r.title,description:r.description,image:r.imageUrl||void 0,icon:_e.createElement(I(r.type)),theme:"primary",size:"md",variant:"default"})}),e.jsx("div",{className:"absolute top-2 left-2",children:o("admin")?e.jsx("span",{className:"bg-red-600 text-white px-2 py-1 rounded text-sm",children:"Admin View"}):o("host")&&r.assignedHost===p?.uid?e.jsx("span",{className:"bg-purple-600 text-white px-2 py-1 rounded text-sm",children:"Assigned to You"}):e.jsx("span",{className:"bg-blue-600 text-white px-2 py-1 rounded text-sm",children:"Your Card"})}),e.jsx("div",{className:"absolute top-2 right-2",children:x===r.id?e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:a=>{a.stopPropagation(),t(r.id)},disabled:y,className:"p-2 bg-green-600 text-white rounded-full hover:bg-green-700 transition-colors duration-200 disabled:opacity-50",children:e.jsx(Le,{className:"w-4 h-4"})}),e.jsx("button",{onClick:a=>{a.stopPropagation(),n()},className:"p-2 bg-gray-600 text-white rounded-full hover:bg-gray-700 transition-colors duration-200",children:e.jsx(Ve,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"flex space-x-1",children:[X(r)&&e.jsx("button",{onClick:a=>{a.stopPropagation(),u(r)},className:"p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors duration-200",children:e.jsx(Ue,{className:"w-4 h-4"})}),Y()&&e.jsx("button",{onClick:a=>{a.stopPropagation(),d(r.id,r.title)},disabled:N===r.id,className:"p-2 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors duration-200 disabled:opacity-50",children:N===r.id?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):e.jsx(Ee,{className:"w-4 h-4"})})]})})]}),e.jsx("div",{className:"p-6",children:x===r.id?e.jsxs("div",{className:"space-y-3",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Title *"}),e.jsx("input",{type:"text",value:g.title||"",onChange:a=>f("title",q(a.target.value)),onClick:a=>a.stopPropagation(),placeholder:"Card title",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Type *"}),e.jsx("input",{type:"text",value:g.type||"",onChange:a=>f("type",q(a.target.value)),onClick:a=>a.stopPropagation(),placeholder:"Card type",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 flex items-center",children:[e.jsx(ye,{className:"w-4 h-4 mr-1"}),"Location"]}),e.jsx("input",{type:"text",value:g.location||"",onChange:a=>f("location",q(a.target.value)),onClick:a=>a.stopPropagation(),placeholder:"Location",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 flex items-center",children:[e.jsx(fe,{className:"w-4 h-4 mr-1"}),"Price per Hour (₹) *"]}),e.jsx("input",{type:"number",value:g.pricePerHour||"",onChange:a=>f("pricePerHour",parseFloat(a.target.value)||0),onClick:a=>a.stopPropagation(),placeholder:"Price per hour",min:"1",step:"1",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 flex items-center",children:[e.jsx(z,{className:"w-4 h-4 mr-1"}),"Description"]}),e.jsx("textarea",{value:g.description||"",onChange:a=>f("description",q(a.target.value)),onClick:a=>a.stopPropagation(),placeholder:"Description",rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Opening Time"}),e.jsx("select",{value:g.openingTime||"00:00",onChange:a=>f("openingTime",a.target.value),onClick:a=>a.stopPropagation(),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:m.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Closing Time"}),e.jsx("select",{value:g.closingTime||"23:00",onChange:a=>f("closingTime",a.target.value),onClick:a=>a.stopPropagation(),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:m.map(a=>e.jsx("option",{value:a,children:a},a))})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2 cursor-pointer hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:r.title}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"inline-block bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 text-sm px-3 py-1 rounded-full",children:r.type}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:r.createdAt?.toDate?.()?.toLocaleDateString()||"Recently added"})]}),r.location&&e.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-400 text-sm mb-2",children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:r.location})]}),r.pricePerHour>0&&e.jsxs("div",{className:"flex items-center text-green-600 dark:text-green-400 text-sm mb-2",children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{className:"font-semibold",children:["₹",r.pricePerHour," per hour"]})]}),(r.openingTime||r.closingTime)&&e.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-400 text-sm mb-2",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:r.openingTime&&r.closingTime?`${r.openingTime} - ${r.closingTime}`:r.openingTime||r.closingTime})]}),r.description&&e.jsx("div",{className:"text-gray-600 dark:text-gray-400 text-sm mb-2",children:e.jsx("p",{className:"line-clamp-2",children:r.description})}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:e.jsxs("span",{className:"font-mono",children:["ID: ",r.Card_ID]})}),o("admin")&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Created by: ",r.userId]}),r.assignedHost&&e.jsxs("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:["Assigned to: ",r.assignedHost]})]})]})})]})},r.id))}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Please log in to view cards."})})}const ds=()=>{const{user:i}=W(),[l,w]=c.useState(""),[b,x]=c.useState({title:"",imageUrl:"",type:"",openingTime:"00:00",closingTime:"23:00",pricePerHour:0,description:"",location:""}),[k,g]=c.useState(!1),[j,y]=c.useState(""),[S,N]=c.useState(!1),p=(()=>{const m=[];for(let u=0;u<24;u++){const n=`${u.toString().padStart(2,"0")}:00`;m.push(n)}return m})(),o=async m=>{if(m.preventDefault(),!i){y("You must be logged in to submit a request");return}if(!l.trim()){y("Please provide a message for your request");return}if(!b.title||!b.type||!b.pricePerHour){y("Please fill in all required card details");return}if(b.pricePerHour<=0){y("Price per hour must be greater than 0");return}g(!0),y("");try{await Q(F(v,"Requests"),{userId:i.uid,userEmail:i.email,message:l,status:"pending",cardData:b,requestType:"new-card",createdAt:R(),updatedAt:R()}),w(""),x({title:"",imageUrl:"",type:"",openingTime:"00:00",closingTime:"23:00",pricePerHour:0,description:"",location:""}),N(!0),setTimeout(()=>N(!1),5e3)}catch{y("Failed to submit request. Please try again.")}finally{g(!1)}},T=(m,u)=>{x(n=>({...n,[m]:u}))},C=m=>m.charAt(0).toUpperCase()+m.slice(1);return S?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(he,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Request Submitted Successfully!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your request for a new card has been sent to the administrators. You will be notified once it's reviewed."}),e.jsx("button",{onClick:()=>N(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200",children:"Submit Another Request"})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Request New Card"}),j&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg mb-6",children:j}),e.jsxs("form",{onSubmit:o,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Why do you want to add this card? *"}),e.jsx("textarea",{value:l,onChange:m=>w(m.target.value),placeholder:"Please explain why you want to add this card and how it will benefit users...",rows:4,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsxs("h4",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(z,{className:"w-5 h-5 mr-2 text-blue-600"}),"New Card Details"]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Guidelines:"})," Opening time starts from 00:00 (midnight) and closing time ends at 23:00 (11 PM). Please select appropriate times for your venue."]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Card Title *"}),e.jsx("input",{type:"text",value:b.title,onChange:m=>T("title",C(m.target.value)),placeholder:"e.g., Victory Sports Arena",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sport/Activity Type *"}),e.jsx("input",{type:"text",value:b.type,onChange:m=>T("type",C(m.target.value)),placeholder:"e.g., Football, Cricket, Tennis",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(fe,{className:"w-4 h-4 mr-1"}),"Price per Hour (₹) *"]}),e.jsx("input",{type:"number",value:b.pricePerHour||"",onChange:m=>T("pricePerHour",parseFloat(m.target.value)||0),placeholder:"Enter price per hour",min:"1",step:"1",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(ce,{className:"w-4 h-4 mr-1"}),"Opening Time"]}),e.jsx("select",{value:b.openingTime,onChange:m=>T("openingTime",m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:p.map(m=>e.jsx("option",{value:m,children:m},m))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(ce,{className:"w-4 h-4 mr-1"}),"Closing Time"]}),e.jsx("select",{value:b.closingTime,onChange:m=>T("closingTime",m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:p.map(m=>e.jsx("option",{value:m,children:m},m))})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(ye,{className:"w-4 h-4 mr-1"}),"Location"]}),e.jsx("input",{type:"text",value:b.location,onChange:m=>T("location",C(m.target.value)),placeholder:"e.g., Banjara Hills, Hyderabad",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(je,{className:"w-4 h-4 mr-1"}),"Image URL"]}),e.jsx("input",{type:"url",value:b.imageUrl,onChange:m=>T("imageUrl",m.target.value),placeholder:"https://example.com/image.jpg",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:b.description,onChange:m=>T("description",C(m.target.value)),placeholder:"Describe your venue, facilities, and what makes it special...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsx("button",{type:"submit",disabled:k,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-6 rounded-lg hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium",children:k?"Submitting Request...":"Submit Card Request"})]})]})},cs=({onSuccess:i})=>{const{user:l}=W(),[w,b]=c.useState(""),[x,k]=c.useState({title:"",imageUrl:"",type:"",openingTime:"00:00",closingTime:"23:00",pricePerHour:0,description:"",location:""}),[g,j]=c.useState(!1),[y,S]=c.useState(""),[N,A]=c.useState(!1),o=(()=>{const u=[];for(let n=0;n<24;n++){const t=`${n.toString().padStart(2,"0")}:00`;u.push(t)}return u})(),T=async u=>{if(u.preventDefault(),!l){S("You must be logged in to submit a request");return}if(!w.trim()){S("Please provide a message for your request");return}if(!x.title||!x.type||!x.pricePerHour){S("Please fill in all required card details");return}if(x.pricePerHour<=0){S("Price per hour must be greater than 0");return}j(!0),S("");try{await Q(F(v,"Requests"),{userId:l.uid,userEmail:l.email,message:w,status:"pending",cardData:x,requestType:"host-request",createdAt:R(),updatedAt:R()}),b(""),k({title:"",imageUrl:"",type:"",openingTime:"00:00",closingTime:"23:00",pricePerHour:0,description:"",location:""}),A(!0),setTimeout(()=>A(!1),5e3),i&&i()}catch{S("Failed to submit request. Please try again.")}finally{j(!1)}},C=(u,n)=>{k(t=>({...t,[u]:n}))},m=u=>u.charAt(0).toUpperCase()+u.slice(1);return N?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(he,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Request Submitted Successfully!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your request to become a host has been sent to the administrators. You will be notified once it's reviewed."}),e.jsx("button",{onClick:()=>A(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200",children:"Submit Another Request"})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Request to Become a Host"}),y&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg mb-6",children:y}),e.jsxs("form",{onSubmit:T,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Why do you want to become a host? *"}),e.jsx("textarea",{value:w,onChange:u=>b(u.target.value),placeholder:"Please explain why you want to become a host and how you plan to contribute...",rows:4,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsxs("h4",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(z,{className:"w-5 h-5 mr-2 text-blue-600"}),"Card Details (What you want to host)"]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Guidelines:"})," Opening time starts from 00:00 (midnight) and closing time ends at 23:00 (11 PM). Please select appropriate times for your venue."]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Card Title *"}),e.jsx("input",{type:"text",value:x.title,onChange:u=>C("title",m(u.target.value)),placeholder:"e.g., Victory Sports Arena",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sport/Activity Type *"}),e.jsx("input",{type:"text",value:x.type,onChange:u=>C("type",m(u.target.value)),placeholder:"e.g., Football, Cricket, Tennis",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(fe,{className:"w-4 h-4 mr-1"}),"Price per Hour (₹) *"]}),e.jsx("input",{type:"number",value:x.pricePerHour||"",onChange:u=>C("pricePerHour",parseFloat(u.target.value)||0),placeholder:"Enter price per hour",min:"1",step:"1",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(ce,{className:"w-4 h-4 mr-1"}),"Opening Time"]}),e.jsx("select",{value:x.openingTime,onChange:u=>C("openingTime",u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:o.map(u=>e.jsx("option",{value:u,children:u},u))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(ce,{className:"w-4 h-4 mr-1"}),"Closing Time"]}),e.jsx("select",{value:x.closingTime,onChange:u=>C("closingTime",u.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:o.map(u=>e.jsx("option",{value:u,children:u},u))})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(ye,{className:"w-4 h-4 mr-1"}),"Location"]}),e.jsx("input",{type:"text",value:x.location,onChange:u=>C("location",m(u.target.value)),placeholder:"e.g., Banjara Hills, Hyderabad",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(je,{className:"w-4 h-4 mr-1"}),"Image URL"]}),e.jsx("input",{type:"url",value:x.imageUrl,onChange:u=>C("imageUrl",u.target.value),placeholder:"https://example.com/image.jpg",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:x.description,onChange:u=>C("description",m(u.target.value)),placeholder:"Describe your venue, facilities, and what makes it special...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsx("button",{type:"submit",disabled:g,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-6 rounded-lg hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium",children:g?"Submitting Request...":"Submit Host Request"})]})]})},us=()=>{const{hasRole:i}=W(),[l,w]=c.useState({title:"Welcome to TURFION",subtitle:"Discover and book amazing sports venues and activities",backgroundImage:"https://images.pexels.com/photos/3657154/pexels-photo-3657154.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2",buttonText:"Explore Now",buttonLink:"#cards"}),[b,x]=c.useState(!0),[k,g]=c.useState(!1),[j,y]=c.useState(""),[S,N]=c.useState("");c.useEffect(()=>{(async()=>{try{const T=await Oe(H(v,"settings","hero"));if(T.exists()){const C=T.data();w(C)}}catch{y("Failed to load homepage data")}finally{x(!1)}})()},[]);const A=async()=>{if(!l.title.trim()||!l.subtitle.trim()){y("Title and subtitle are required");return}g(!0),y(""),N("");try{await ls(H(v,"settings","hero"),{...l,updatedAt:R()}),N("Homepage updated successfully!")}catch{y("Failed to save homepage data")}finally{g(!1)}},p=(o,T)=>{w(C=>({...C,[o]:T})),y(""),N("")};return i("admin")?b?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Manage Homepage Hero Section"}),j&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg mb-4",children:j}),S&&e.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg mb-4",children:S}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(Pe,{className:"w-4 h-4 mr-2"}),"Hero Title *"]}),e.jsx("input",{type:"text",value:l.title,onChange:o=>p("title",o.target.value),placeholder:"Enter hero title",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(Pe,{className:"w-4 h-4 mr-2"}),"Hero Subtitle *"]}),e.jsx("textarea",{value:l.subtitle,onChange:o=>p("subtitle",o.target.value),placeholder:"Enter hero subtitle",rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Background Image URL"]}),e.jsx("input",{type:"url",value:l.backgroundImage,onChange:o=>p("backgroundImage",o.target.value),placeholder:"https://example.com/image.jpg",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Button Text"}),e.jsx("input",{type:"text",value:l.buttonText,onChange:o=>p("buttonText",o.target.value),placeholder:"Enter button text",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(Ge,{className:"w-4 h-4 mr-2"}),"Button Link"]}),e.jsx("input",{type:"text",value:l.buttonLink,onChange:o=>p("buttonLink",o.target.value),placeholder:"Enter button link (e.g., #cards or https://example.com)",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Use #cards to scroll to cards section, or enter a full URL for external links"})]}),e.jsxs("button",{onClick:A,disabled:k,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium flex items-center justify-center",children:[e.jsx(Le,{className:"w-5 h-5 mr-2"}),k?"Saving...":"Save Changes"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Preview"}),e.jsxs("div",{className:"relative h-64 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url(${l.backgroundImage})`},children:e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50"})}),e.jsx("div",{className:"relative h-full flex items-center justify-center text-center text-white px-4",children:e.jsxs("div",{className:"max-w-2xl",children:[e.jsx("h1",{className:"text-2xl md:text-4xl font-bold mb-2",children:l.title}),e.jsx("p",{className:"text-sm md:text-lg mb-4 text-gray-200",children:l.subtitle}),e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg text-sm transition-all duration-300",children:l.buttonText})]})})]})]})]}):e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg",children:"Only administrators can manage the homepage."})},ms=()=>{const{hasRole:i}=W(),[l,w]=c.useState([]),[b,x]=c.useState(!0),[k,g]=c.useState(null),[j,y]=c.useState(""),[S,N]=c.useState("");c.useEffect(()=>{if(!i("admin"))return;const o=G(F(v,"users"),ae("role","==","host"));return de(o,C=>{const m=C.docs.map(u=>({id:u.id,...u.data()}));m.sort((u,n)=>{const t=u.createdAt?.toDate?.()||new Date(0);return(n.createdAt?.toDate?.()||new Date(0)).getTime()-t.getTime()}),w(m),x(!1)},C=>{y("Failed to load hosts"),x(!1)})},[i]);const A=async(o,T)=>{if(confirm(`Are you sure you want to revoke host privileges for ${T}? This action will also delete all cards created by this host and any open slots associated with those cards.`)){g(o),y(""),N("");try{const C=G(F(v,"cards"),ae("userId","==",o)),m=await Ae(C),u=m.docs.map(d=>d.id);for(const d of u){const f=G(F(v,"bookings"),ae("cardId","==",d),ae("openSlots",">",0)),q=(await Ae(f)).docs.map(I=>De(H(v,"bookings",I.id)));await Promise.all(q)}const n=m.docs.map(d=>De(H(v,"cards",d.id)));await Promise.all(n);const t=H(v,"users",o);await O(t,{role:"user",updatedAt:R()}),N(`Host privileges revoked for ${T}. Deleted ${m.docs.length} card(s) and associated open slots.`)}catch{y("Failed to revoke host privileges. Please try again.")}finally{g(null)}}},p=o=>o?.toDate?o.toDate().toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown";return i("admin")?b?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h3",{className:"text-xl font-semibold flex items-center",children:[e.jsx($,{className:"w-6 h-6 mr-2 text-blue-600"}),"Manage Hosts (",l.length,")"]})}),j&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg mb-4",children:j}),S&&e.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg mb-4",children:S}),l.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[e.jsx($,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No hosts found"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Users with host privileges will appear here"})]}):e.jsx("div",{className:"space-y-4",children:l.map(o=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx($,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:o.displayName||o.email}),o.displayName&&e.jsx("p",{className:"text-sm text-gray-600",children:o.email}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 mt-1",children:[e.jsxs("span",{children:["ID: ",o.id]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Host since: ",p(o.createdAt)]}),o.updatedAt&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Updated: ",p(o.updatedAt)]})]})]})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium",children:"Host"}),e.jsx("button",{onClick:()=>A(o.id,o.email),disabled:k===o.id,className:"flex items-center space-x-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:k===o.id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Revoking..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"w-4 h-4"}),e.jsx("span",{children:"Revoke Host"})]})})]})]})},o.id))}),e.jsx("div",{className:"mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Ne,{className:"w-5 h-5 text-yellow-600 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-yellow-800",children:"Important Notice"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:`Revoking host privileges will change the user's role back to "user" and automatically delete all cards created by that host, including any open slots associated with those cards. This action cannot be undone.`})]})]})})]})}):e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg",children:"Only administrators can manage hosts."})},xs=()=>{const{hasRole:i}=W(),[l,w]=c.useState([]),[b,x]=c.useState([]),[k,g]=c.useState(!0),[j,y]=c.useState(null),[S,N]=c.useState(""),[A,p]=c.useState(""),[o,T]=c.useState("");c.useEffect(()=>{if(!i("admin"))return;const t=[],d=G(F(v,"users"),ae("role","==","host")),f=de(d,I=>{const X=I.docs.map(Y=>({id:Y.id,...Y.data()}));w(X)});t.push(f);const P=G(F(v,"cards")),q=de(P,I=>{const X=I.docs.map(Y=>({id:Y.id,...Y.data()}));x(X),g(!1)});return t.push(q),()=>{t.forEach(I=>I())}},[i]);const C=async(t,d)=>{y(t),N(""),p("");try{await O(H(v,"cards",t),{assignedHost:d,updatedAt:R()});const f=l.find(q=>q.id===d),P=b.find(q=>q.id===t);p(`Successfully assigned "${P?.title}" to ${f?.displayName||f?.email}`)}catch{N("Failed to assign card. Please try again.")}finally{y(null)}},m=async t=>{y(t),N(""),p("");try{await O(H(v,"cards",t),{assignedHost:null,updatedAt:R()});const d=b.find(f=>f.id===t);p(`Successfully unassigned "${d?.title}"`)}catch{N("Failed to unassign card. Please try again.")}finally{y(null)}},u=t=>{const d=l.find(f=>f.id===t);return d?.displayName||d?.email||"Unknown Host"},n=b.filter(t=>t.title.toLowerCase().includes(o.toLowerCase())||t.type.toLowerCase().includes(o.toLowerCase())||t.location?.toLowerCase().includes(o.toLowerCase()));return i("admin")?k?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-semibold flex items-center",children:[e.jsx(Te,{className:"w-6 h-6 mr-2 text-blue-600"}),"Assign Cards to Hosts"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[b.length," total cards • ",l.length," hosts available"]})]}),S&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg mb-4",children:S}),A&&e.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg mb-4",children:A}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ie,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search cards by title, type, or location...",value:o,onChange:t=>T(t.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),n.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[e.jsx(Te,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:o?"No cards match your search":"No cards found"})]}):e.jsx("div",{className:"space-y-4",children:n.map(t=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:t.type.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:t.title}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsx("span",{children:t.type}),t.location&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{children:t.location})]}),e.jsx("span",{children:"•"}),e.jsxs("span",{className:"font-mono text-xs",children:["ID: ",t.Card_ID]})]}),t.assignedHost&&e.jsx("div",{className:"mt-1",children:e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx($,{className:"w-3 h-3 mr-1"}),"Assigned to: ",u(t.assignedHost)]})})]})]})}),e.jsx("div",{className:"flex items-center space-x-2",children:t.assignedHost?e.jsx("button",{onClick:()=>m(t.id),disabled:j===t.id,className:"px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:j===t.id?"Unassigning...":"Unassign"}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{onChange:d=>{d.target.value&&(C(t.id,d.target.value),d.target.value="")},disabled:j===t.id,className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select Host"}),l.map(d=>e.jsx("option",{value:d.id,children:d.displayName||d.email},d.id))]}),j===t.id&&e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"})]})})]})},t.id))}),e.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Ne,{className:"w-5 h-5 text-blue-600 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-800",children:"Assignment Guidelines"}),e.jsxs("ul",{className:"text-sm text-blue-700 mt-1 space-y-1",children:[e.jsx("li",{children:"• Assigned hosts can edit and manage their assigned cards"}),e.jsx("li",{children:"• Hosts cannot book their own assigned cards"}),e.jsx("li",{children:"• Only one host can be assigned per card"}),e.jsx("li",{children:"• Unassigned cards can be managed by any admin"})]})]})]})})]})}):e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg",children:"Only administrators can assign cards to hosts."})},gs=()=>{const{hasRole:i}=W(),[l,w]=c.useState([]),[b,x]=c.useState(!0),[k,g]=c.useState(null),[j,y]=c.useState(""),[S,N]=c.useState(""),[A,p]=c.useState("");c.useEffect(()=>{if(!i("admin"))return;const n=G(F(v,"users"));return de(n,d=>{const f=d.docs.map(P=>({id:P.id,...P.data()}));f.sort((P,q)=>{const I=P.createdAt?.toDate?.()||new Date(0);return(q.createdAt?.toDate?.()||new Date(0)).getTime()-I.getTime()}),w(f),x(!1)},d=>{y("Failed to load users"),x(!1)})},[i]);const o=async(n,t)=>{if(confirm(`Are you sure you want to reset MFA for ${t}? This will disable their MFA and remove their secret key.`)){g(n),y(""),N("");try{await O(H(v,"users",n),{mfaEnabled:!1,mfaSecret:"",updatedAt:R()}),await Q(F(v,"notifications"),{userId:n,type:"mfa_reset",title:"MFA Reset by Administrator",message:"Your Multi-Factor Authentication has been reset by an administrator. You can set up MFA again from your profile settings if needed.",read:!1,createdAt:R()}),N(`MFA has been reset for ${t}`)}catch{y("Failed to reset MFA. Please try again.")}finally{g(null)}}},T=async(n,t,d)=>{const f=["user","host","admin"],P=prompt(`Change role for ${t}. Current role: ${d}

Enter new role (user/host/admin):`,d);if(!(!P||!f.includes(P.toLowerCase())||P.toLowerCase()===d)&&confirm(`Are you sure you want to change ${t}'s role from ${d} to ${P.toLowerCase()}?`)){g(n),y(""),N("");try{await O(H(v,"users",n),{role:P.toLowerCase(),updatedAt:R()}),await Q(F(v,"notifications"),{userId:n,type:"role_changed",title:"Account Role Updated",message:`Your account role has been changed from ${d} to ${P.toLowerCase()} by an administrator.`,read:!1,createdAt:R()}),N(`Role changed for ${t} from ${d} to ${P.toLowerCase()}`)}catch{y("Failed to change role. Please try again.")}finally{g(null)}}},C=n=>n?.toDate?n.toDate().toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown",m=n=>{switch(n){case"admin":return"bg-red-100 text-red-800";case"host":return"bg-purple-100 text-purple-800";default:return"bg-blue-100 text-blue-800"}},u=l.filter(n=>n.email.toLowerCase().includes(A.toLowerCase())||n.displayName?.toLowerCase().includes(A.toLowerCase())||n.role.toLowerCase().includes(A.toLowerCase()));return i("admin")?b?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h3",{className:"text-xl font-semibold flex items-center",children:[e.jsx($,{className:"w-6 h-6 mr-2 text-blue-600"}),"User Settings (",l.length," users)"]})}),j&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg mb-4",children:j}),S&&e.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg mb-4",children:S}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ie,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search users by email, name, or role...",value:A,onChange:n=>p(n.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),u.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[e.jsx($,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:A?"No users match your search":"No users found"})]}):e.jsx("div",{className:"space-y-4",children:u.map(n=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow duration-200",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 space-y-2 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx($,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:n.displayName||n.email}),n.displayName&&e.jsx("p",{className:"text-sm text-gray-600",children:n.email}),n.phoneNumber&&e.jsxs("p",{className:"text-sm text-gray-500",children:["📞 ",n.phoneNumber]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${m(n.role)}`,children:n.role.charAt(0).toUpperCase()+n.role.slice(1)}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center ${n.mfaEnabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:n.mfaEnabled?e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"w-3 h-3 mr-1"}),"MFA Enabled"]}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-3 h-3 mr-1"}),"MFA Disabled"]})})]})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500 space-y-1",children:[e.jsxs("p",{children:["User ID: ",n.id]}),e.jsxs("p",{children:["Created: ",C(n.createdAt)]}),n.updatedAt&&e.jsxs("p",{children:["Updated: ",C(n.updatedAt)]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-2",children:[e.jsxs("button",{onClick:()=>T(n.id,n.email,n.role),disabled:k===n.id,className:"flex items-center justify-center space-x-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:[e.jsx(Xe,{className:"w-4 h-4"}),e.jsx("span",{children:"Change Role"})]}),n.mfaEnabled&&e.jsx("button",{onClick:()=>o(n.id,n.email),disabled:k===n.id,className:"flex items-center justify-center space-x-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:k===n.id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Resetting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-4 h-4"}),e.jsx("span",{children:"Reset MFA"})]})})]})]})},n.id))}),e.jsx("div",{className:"mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Ne,{className:"w-5 h-5 text-yellow-600 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-yellow-800",children:"Admin Actions"}),e.jsxs("ul",{className:"text-sm text-yellow-700 mt-1 space-y-1",children:[e.jsx("li",{children:"• Reset MFA: Disables MFA and removes secret key for the user"}),e.jsx("li",{children:"• Change Role: Modify user permissions (user/host/admin)"}),e.jsx("li",{children:"• Users will be notified of any changes made to their account"}),e.jsx("li",{children:"• All actions are logged and cannot be undone"})]})]})]})})]})}):e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg",children:"Only administrators can access user settings."})},hs=({onSuccess:i})=>{const{user:l,userProfile:w}=W(),[b,x]=c.useState(""),[k,g]=c.useState(!1),[j,y]=c.useState(""),[S,N]=c.useState(!1),A=async p=>{if(p.preventDefault(),!l){y("You must be logged in to submit a request");return}if(!b.trim()){y("Please provide a reason for your MFA reset request");return}g(!0),y("");try{await Q(F(v,"Requests"),{userId:l.uid,userEmail:l.email,userDisplayName:w?.displayName||"",userPhoneNumber:w?.phoneNumber||"",message:b,status:"pending",requestType:"mfa-reset",createdAt:R(),updatedAt:R()}),x(""),N(!0),setTimeout(()=>N(!1),5e3),i&&i()}catch{y("Failed to submit request. Please try again.")}finally{g(!1)}};return w?.mfaEnabled?S?e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(he,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"MFA Reset Request Submitted!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your request to reset Multi-Factor Authentication has been sent to the administrators. You will be notified once it's reviewed."}),e.jsx("button",{onClick:()=>N(!1),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200",children:"Submit Another Request"})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(le,{className:"w-6 h-6 mr-2 text-red-600"}),e.jsx("h3",{className:"text-xl font-semibold",children:"Request MFA Reset"})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Ne,{className:"w-5 h-5 text-yellow-600 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-yellow-800",children:"Important Notice"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"This request will be reviewed by administrators. Only submit this request if you've lost access to your authenticator app or device. Once approved, your MFA will be completely reset and you'll need to set it up again."})]})]})}),j&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg mb-6",children:j}),e.jsxs("form",{onSubmit:A,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for MFA Reset Request *"}),e.jsx("textarea",{value:b,onChange:p=>x(p.target.value),placeholder:"Please explain why you need your MFA reset (e.g., lost device, new phone, authenticator app issues, etc.)",rows:4,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-800 mb-2",children:"What happens next?"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"• Your request will be reviewed by an administrator"}),e.jsx("li",{children:"• You'll receive a notification with the decision"}),e.jsx("li",{children:"• If approved, your MFA will be reset immediately"}),e.jsx("li",{children:"• You can then set up MFA again from your profile"})]})]}),e.jsx("button",{type:"submit",disabled:k,className:"w-full bg-red-600 text-white py-3 px-6 rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium",children:k?"Submitting Request...":"Submit MFA Reset Request"})]})]}):e.jsx("div",{className:"bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(le,{className:"w-5 h-5 mr-2"}),e.jsx("span",{children:"MFA is not enabled on your account. You can enable it from your profile settings."})]})})},Se=10,Ns=()=>{const{user:i,hasRole:l,userProfile:w}=W(),b=Be(),[x,k]=c.useState("bookings"),[g,j]=c.useState("host-requests"),[y,S]=c.useState([]),[N,A]=c.useState([]),[p,o]=c.useState([]),[T,C]=c.useState(!0),[m,u]=c.useState(new Set),[n,t]=c.useState(1),[d,f]=c.useState(1),[P,q]=c.useState(1);c.useEffect(()=>{if(!i){b("/");return}const s=[],h=G(F(v,"bookings"),ae("userId","==",i.uid),Ce("bookingTime","desc")),D=de(h,async E=>{const ue=[];for(const ie of E.docs){const oe={id:ie.id,...ie.data()};try{const me=await Oe(H(v,"cards",oe.cardId));if(me.exists()){const ve=me.data();oe.cardTitle=ve.title,oe.cardType=ve.type,oe.cardLocation=ve.location}}catch{}ue.push(oe)}S(ue),C(!1)});if(s.push(D),l("admin")){const E=G(F(v,"Requests"),Ce("createdAt","desc")),ue=de(E,ie=>{const oe=ie.docs.map(me=>({id:me.id,...me.data()}));A(oe)});s.push(ue)}const U=G(F(v,"notifications"),ae("userId","==",i.uid),Ce("createdAt","desc")),V=de(U,E=>{const ue=E.docs.map(ie=>({id:ie.id,...ie.data()}));o(ue)});return s.push(V),()=>{s.forEach(E=>E())}},[i,l,b]);const I=()=>{const s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let h="";for(let D=0;D<30;D++)h+=s.charAt(Math.floor(Math.random()*s.length));return h},X=async(s,h,D)=>{if(!D.trim()){alert("Please provide a response message");return}try{if(h.requestType==="host-request"){if(await O(H(v,"users",h.userId),{role:"host",updatedAt:R()}),h.cardData){const V=I();await Q(F(v,"cards"),{...h.cardData,Card_ID:V,userId:h.userId,assignedHost:h.userId,createdAt:R(),updatedAt:R()})}}else if(h.requestType==="new-card"&&h.cardData){const V=I();await Q(F(v,"cards"),{...h.cardData,Card_ID:V,userId:h.userId,createdAt:R(),updatedAt:R()})}else h.requestType==="mfa-reset"&&await O(H(v,"users",h.userId),{mfaEnabled:!1,mfaSecret:"",updatedAt:R()});await O(H(v,"Requests",s),{status:"approved",adminResponse:D,updatedAt:R()});let U=D;h.requestType==="host-request"?U+=`

Your request to become a host has been approved. You can now create and manage cards.`:h.requestType==="new-card"?U+=`

Your card request has been approved and the card has been created.`:h.requestType==="mfa-reset"&&(U+=`

Your MFA has been reset. You can set up MFA again from your profile settings.`),await Q(F(v,"notifications"),{userId:h.userId,type:"request_approved",title:"Request Approved!",message:U,read:!1,createdAt:R()})}catch{alert("Failed to approve request. Please try again.")}},Y=async(s,h,D)=>{if(!D.trim()){alert("Please provide a response message");return}try{await O(H(v,"Requests",s),{status:"rejected",adminResponse:D,updatedAt:R()});let U=D;h.requestType==="host-request"?U+=`

Your request to become a host has been rejected.`:h.requestType==="new-card"?U+=`

Your card request has been rejected.`:h.requestType==="mfa-reset"&&(U+=`

Your MFA reset request has been rejected.`),await Q(F(v,"notifications"),{userId:h.userId,type:"request_rejected",title:"Request Rejected",message:U,read:!1,createdAt:R()})}catch{alert("Failed to reject request. Please try again.")}},r=async s=>{try{await O(H(v,"notifications",s),{read:!0})}catch{}},a=async s=>{try{await De(H(v,"notifications",s))}catch{}},L=s=>{b(`/receipt/${s}`)},M=s=>{u(h=>{const D=new Set(h);return D.has(s)?D.delete(s):D.add(s),D})},J=async(s,h)=>{try{await O(H(v,"bookings",s),{openSlots:h})}catch{alert("Failed to update open slots. Please try again.")}},te=s=>new Date(s).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}),B=s=>s?.toDate?s.toDate().toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown",Z=s=>new Date(s.date+" "+s.timeSlot)<new Date,K=y.filter(s=>!Z(s)),pe=y.filter(s=>Z(s)),ne=p.filter(s=>!s.read),ee=N.filter(s=>s.requestType==="host-request"||s.requestType==="new-card"),_=N.filter(s=>s.requestType==="mfa-reset"),se=(s,h)=>{const D=(h-1)*Se,U=D+Se;return s.slice(D,U)},re=s=>Math.ceil(s.length/Se),xe=({currentPage:s,totalPages:h,onPageChange:D})=>h<=1?null:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center space-y-4 sm:space-y-0 sm:space-x-4 mt-6",children:[e.jsxs("button",{onClick:()=>D(s-1),disabled:s===1,className:"flex items-center px-4 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[e.jsx(ts,{className:"w-4 h-4 mr-1"}),"Previous"]}),e.jsx("div",{className:"flex items-center space-x-2 overflow-x-auto",children:Array.from({length:Math.min(5,h)},(U,V)=>{let E;return h<=5||s<=3?E=V+1:s>=h-2?E=h-4+V:E=s-2+V,e.jsx("button",{onClick:()=>D(E),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors duration-200 ${E===s?"bg-blue-600 text-white":"text-gray-500 bg-white border border-gray-300 hover:bg-gray-50 hover:text-gray-700"}`,children:E},E)})}),e.jsxs("button",{onClick:()=>D(s+1),disabled:s===h,className:"flex items-center px-4 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:["Next",e.jsx(rs,{className:"w-4 h-4 ml-1"})]})]}),$e=s=>{const h={user:"bg-blue-100 text-blue-800",host:"bg-purple-100 text-purple-800",admin:"bg-red-100 text-red-800"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h[s]||"bg-gray-100 text-gray-800"}`,children:s.charAt(0).toUpperCase()+s.slice(1)})};if(!i)return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"text-center",children:e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Please log in to access your dashboard"})})});if(T)return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})});const Ye=[{id:"bookings",label:"Your Bookings",icon:be},{id:"notifications",label:`Notifications ${ne.length>0?`(${ne.length})`:""}`,icon:qe},...l("user")?[{id:"host-request",label:"Become a Host",icon:Me},{id:"mfa-reset",label:"MFA Reset",icon:le}]:[],...l("host")?[{id:"cards",label:"Your Cards",icon:z},{id:"request-card",label:"Request New Card",icon:z},{id:"mfa-reset",label:"MFA Reset",icon:le}]:[],...l("admin")?[{id:"cards",label:"All Cards",icon:z},{id:"add-card",label:"Add Card",icon:Je},{id:"requests",label:"Requests",icon:z},{id:"assign-cards",label:"Assign Cards",icon:Te},{id:"user-settings",label:"User Settings",icon:$},{id:"manage-homepage",label:"Manage Homepage",icon:Ze},{id:"manage-hosts",label:"Manage Hosts",icon:$}]:[]];return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"Dashboard"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-3",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Welcome back, ",w?.displayName||i.email]}),w?.role&&$e(w.role)]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg mb-8",children:[e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"flex space-x-2 sm:space-x-8 px-4 sm:px-6 overflow-x-auto","aria-label":"Tabs",children:Ye.map(s=>{const h=s.icon;return e.jsxs("button",{onClick:()=>k(s.id),className:`py-4 px-1 border-b-2 font-medium text-xs sm:text-sm flex items-center space-x-2 transition-colors duration-200 whitespace-nowrap ${x===s.id?"border-blue-500 dark:border-blue-400 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[e.jsx(h,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:s.label}),e.jsx("span",{className:"sm:hidden",children:s.label.split(" ")[0]})]},s.id)})})}),e.jsxs("div",{className:"p-4 sm:p-6",children:[x==="bookings"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-900 dark:text-white",children:"Your Bookings"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4",children:["Upcoming Bookings (",K.length,")"]}),K.length===0?e.jsxs("div",{className:"text-center py-8 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx(be,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No upcoming bookings"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:se(K,n).map(s=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-white dark:bg-gray-800",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start space-y-4 sm:space-y-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:s.cardTitle||"Unknown Card"}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:te(s.date)})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:s.timeSlot})]}),s.cardLocation&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-4 h-4 mr-2",children:"📍"}),e.jsx("span",{children:s.cardLocation})]}),s.openSlots&&s.openSlots>0&&e.jsxs("div",{className:"flex items-center",children:[e.jsx($,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{children:[s.openSlots," open slots"]}),s.perSlotPrice&&e.jsxs("span",{className:"ml-2 text-green-600",children:["@ ₹",s.perSlotPrice,"/slot"]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-2",children:[e.jsxs("button",{onClick:()=>L(s.id),className:"flex items-center justify-center space-x-1 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 text-sm",children:[e.jsx(Fe,{className:"w-4 h-4"}),e.jsx("span",{children:"Receipt"})]}),s.openSlots&&s.openSlots>0&&e.jsxs("button",{onClick:()=>M(s.id),className:"flex items-center justify-center space-x-1 px-3 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200 text-sm",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{children:"Edit Slots"}),m.has(s.id)?e.jsx(Ke,{className:"w-4 h-4"}):e.jsx(es,{className:"w-4 h-4"})]})]})]}),m.has(s.id)&&s.openSlots&&s.openSlots>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("h5",{className:"font-medium text-gray-800 mb-3",children:"Edit Open Slots"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Current open slots: ",s.openSlots]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from({length:s.openSlots},(h,D)=>e.jsxs("button",{onClick:()=>J(s.id,s.openSlots-1),className:"flex items-center space-x-1 px-2 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors duration-200 text-sm",children:[e.jsx(ss,{className:"w-3 h-3"}),e.jsx("span",{children:"Remove 1"})]},D))})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"You can only decrease the number of open slots. Once removed, slots cannot be added back."})]})]},s.id))}),e.jsx(xe,{currentPage:n,totalPages:re(K),onPageChange:t})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-4",children:["Completed Bookings (",pe.length,")"]}),pe.length===0?e.jsxs("div",{className:"text-center py-8 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx(he,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No completed bookings"})]}):e.jsx("div",{className:"space-y-4",children:se(pe,n).map(s=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-700/50",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start space-y-4 sm:space-y-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-700 dark:text-gray-300",children:s.cardTitle||"Unknown Card"}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:te(s.date)})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:s.timeSlot})]}),s.cardLocation&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-4 h-4 mr-2",children:"📍"}),e.jsx("span",{children:s.cardLocation})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-2",children:[e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium text-center",children:"Completed"}),e.jsxs("button",{onClick:()=>L(s.id),className:"flex items-center justify-center space-x-1 px-3 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200 text-sm",children:[e.jsx(Fe,{className:"w-4 h-4"}),e.jsx("span",{children:"Receipt"})]})]})]})},s.id))})]})]}),x==="notifications"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-900 dark:text-white",children:"Notifications"}),p.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx(qe,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"No notifications"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:se(p,d).map(s=>e.jsx("div",{className:`border rounded-lg p-4 ${s.read?"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800":"border-blue-200 dark:border-blue-700 bg-blue-50 dark:bg-blue-900/20"}`,children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start space-y-4 sm:space-y-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:s.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1 text-sm sm:text-base",children:s.message}),(s.joinedByDisplayName||s.joinedByEmail||s.bookedByDisplayName||s.bookedByEmail)&&e.jsxs("div",{className:"mt-2 text-sm text-blue-600 dark:text-blue-400",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Player:"})," ",s.joinedByDisplayName||s.bookedByDisplayName||s.joinedByEmail||s.bookedByEmail]}),s.joinedByPhoneNumber||s.bookedByPhoneNumber?e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",s.joinedByPhoneNumber||s.bookedByPhoneNumber]}):e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," N/A"]}),s.joinedSlots&&e.jsxs("p",{children:[e.jsx("strong",{children:"Slots Joined:"})," ",s.joinedSlots]}),s.bookingTimeSlots&&e.jsxs("p",{children:[e.jsx("strong",{children:"Time Slots:"})," ",s.bookingTimeSlots.join(", ")]})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:B(s.createdAt)})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-2",children:[!s.read&&e.jsx("button",{onClick:()=>r(s.id),className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-sm px-3 py-1 border border-blue-300 dark:border-blue-600 rounded hover:bg-blue-50 dark:hover:bg-blue-900/30 transition-colors duration-200",children:"Mark as read"}),e.jsx("button",{onClick:()=>a(s.id),className:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 p-2 hover:bg-red-50 dark:hover:bg-red-900/30 rounded transition-colors duration-200",children:e.jsx(Ee,{className:"w-4 h-4"})})]})]})},s.id))}),e.jsx(xe,{currentPage:d,totalPages:re(p),onPageChange:f})]})]}),x==="host-request"&&l("user")&&e.jsx(cs,{}),x==="mfa-reset"&&(l("user")||l("host"))&&e.jsx(hs,{}),x==="request-card"&&l("host")&&e.jsx(ds,{}),x==="cards"&&(l("host")||l("admin"))&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:l("admin")?"All Cards":"Your Cards"}),e.jsx(os,{})]}),x==="add-card"&&l("admin")&&e.jsx(ns,{}),x==="assign-cards"&&l("admin")&&e.jsx(xs,{}),x==="user-settings"&&l("admin")&&e.jsx(gs,{}),x==="requests"&&l("admin")&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-900 dark:text-white",children:"Requests"}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsxs("nav",{className:"flex space-x-8","aria-label":"Request Types",children:[e.jsxs("button",{onClick:()=>j("host-requests"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${g==="host-requests"?"border-blue-500 dark:border-blue-400 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,children:["Host Requests (",ee.length,")"]}),e.jsxs("button",{onClick:()=>j("mfa-reset"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${g==="mfa-reset"?"border-blue-500 dark:border-blue-400 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,children:["MFA Reset Requests (",_.length,")"]})]})}),g==="host-requests"&&e.jsx("div",{children:ee.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx(z,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"No host requests"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:se(ee,P).map(s=>e.jsx(He,{request:s,onApprove:X,onReject:Y,formatTime:B},s.id))}),e.jsx(xe,{currentPage:P,totalPages:re(ee),onPageChange:q})]})}),g==="mfa-reset"&&e.jsx("div",{children:_.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[e.jsx(le,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg",children:"No MFA reset requests"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:se(_,P).map(s=>e.jsx(He,{request:s,onApprove:X,onReject:Y,formatTime:B},s.id))}),e.jsx(xe,{currentPage:P,totalPages:re(_),onPageChange:q})]})})]}),x==="manage-homepage"&&l("admin")&&e.jsx(us,{}),x==="manage-hosts"&&l("admin")&&e.jsx(ms,{})]})]})]})},He=({request:i,onApprove:l,onReject:w,formatTime:b})=>{const[x,k]=c.useState(""),[g,j]=c.useState(!1),y=()=>{if(!x.trim()){alert("Please provide a response message");return}l(i.id,i,x),k(""),j(!1)},S=()=>{if(!x.trim()){alert("Please provide a response message");return}w(i.id,i,x),k(""),j(!1)},N=p=>{switch(p){case"host-request":return"Host Request";case"new-card":return"New Card Request";case"mfa-reset":return"MFA Reset Request";default:return"Request"}},A=p=>{switch(p){case"host-request":return e.jsx(Me,{className:"w-5 h-5 text-purple-600"});case"new-card":return e.jsx(z,{className:"w-5 h-5 text-blue-600"});case"mfa-reset":return e.jsx(le,{className:"w-5 h-5 text-red-600"});default:return e.jsx(z,{className:"w-5 h-5 text-gray-600"})}};return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 sm:p-6 bg-white dark:bg-gray-800",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start mb-4 space-y-2 sm:space-y-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[A(i.requestType),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:N(i.requestType)}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["From: ",i.userDisplayName||i.userEmail]}),i.userPhoneNumber&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["📞 ",i.userPhoneNumber]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:b(i.createdAt)})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${i.status==="pending"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300":i.status==="approved"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300"}`,children:i.status.charAt(0).toUpperCase()+i.status.slice(1)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-200 mb-2",children:"Message:"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-700/50 p-3 rounded text-sm",children:i.message})]}),i.cardData&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-200 mb-2",children:"Card Details:"}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded space-y-2 text-sm text-gray-700 dark:text-gray-300",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Title:"})," ",i.cardData.title]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",i.cardData.type]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Location:"})," ",i.cardData.location]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Price per Hour:"})," ₹",i.cardData.pricePerHour]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Hours:"})," ",i.cardData.openingTime," - ",i.cardData.closingTime]}),i.cardData.description&&e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",i.cardData.description]})]})]}),i.adminResponse&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"font-medium text-gray-800 dark:text-gray-200 mb-2",children:"Admin Response:"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 bg-blue-50 dark:bg-blue-900/20 p-3 rounded border border-blue-200 dark:border-blue-700 text-sm",children:i.adminResponse})]}),i.status==="pending"&&e.jsx("div",{className:"space-y-3",children:g?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Admin Response (Required) *"}),e.jsx("textarea",{value:x,onChange:p=>k(p.target.value),placeholder:"Provide your response to the user...",rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:[e.jsxs("button",{onClick:y,disabled:!x.trim(),className:"flex items-center justify-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:[e.jsx(he,{className:"w-4 h-4"}),e.jsx("span",{children:"Approve"})]}),e.jsxs("button",{onClick:S,disabled:!x.trim(),className:"flex items-center justify-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:[e.jsx(as,{className:"w-4 h-4"}),e.jsx("span",{children:"Reject"})]}),e.jsx("button",{onClick:()=>{j(!1),k("")},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200 text-sm",children:"Cancel"})]})]}):e.jsx("button",{onClick:()=>j(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 text-sm",children:"Respond to Request"})})]})};export{Ns as default};
